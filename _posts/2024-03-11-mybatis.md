---
title: "[Spring] ìë°”ì™€ DBë¥¼ ì—°ë™í•˜ëŠ” JDBCì˜ ì¼ë ¨ì˜ ê³¼ì •ê³¼ ì´ë¥¼ ìœ„í•œ ORM í”„ë ˆì„ì›Œí¬, MyBatis ë° MyBatis-Spring ì—°ë™ëª¨ë“ˆ"
date: 2024-03-11 19:30 +0900
lastmod: 2024-03-11 19:30 +0900
categories: Spring
tags: [ORM, Mybatis, JDBC API, PreparedStatement, Mapper]
---

## ORM (Object Relational Mapping)

<div style="margin-bottom: 15px;font-size:20px;background-color:#FFD24D;color:black;font-weight:normal;border-top-left-radius:5px;border-top-right-radius:5px;padding:2px;">
    ğŸ€ ê°ì²´ì™€ ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì˜ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ë§¤í•‘í•´ì£¼ëŠ” ë„êµ¬ë¥¼ ë§í•œë‹¤
</div>

**ORM í”„ë ˆì„ì›Œí¬** ì¤‘ í•˜ë‚˜ê°€ `MyBatis`ì´ë‹¤.

ğŸ¯ JDBC ì½”ë“œ ë° ë§¤ê°œë³€ìˆ˜ì˜ ì¤‘ë³µì‘ì—… ì œê±°  
ğŸ¯ ìë°”ì½”ë“œì™€ SQLì¿¼ë¦¬ì˜ ë¶„ë¦¬ë¡œ ê°„ê²°í™”  
ğŸ¯ ë³µì¡í•œ ì¿¼ë¦¬ ì‘ì„± ê°€ëŠ¥  
ğŸ¯ ì‰¬ìš´ ê°ì²´ ë°”ì¸ë”©

![Alt text](https://i.esdrop.com/d/f/OAHra5CzfD/kSTC97uX1I.png "Optional title"){: width="650" height="300"}

ğŸ¦ ìœ„ì„í•  ë•Œ `parameter`ì™€ `result`ë§Œ ê²°ì •í•´ì£¼ë©´ ì•Œì•„ì„œ ì¡°ì‘í•´ì¤€ë‹¤.  
ğŸ¦ ë‚´ë¶€ê°€ `PreparedStatement`ë¡œ ë™ì‘

<div style="margin-bottom:15px;font-size:15px;background-color:rgba(0,0,0,0.03);border-radius:5px;padding:7px;"><span style="font-weight:bold;">ğŸ“• Statement í´ë˜ìŠ¤</span><br>
ê¸°ë³¸ì ì¸ sql ì§ˆì˜ë¥¼ ì‹¤í–‰í•˜ëŠ”ë° ì‚¬ìš©í•œë‹¤.<br><br>

ğŸš€ Statement í´ë˜ìŠ¤ì˜ ë‚´ì¥ method ğŸš€<br>

- <B>executeQuery(String sql)</B><br>
  <span style="margin-bottom:15px;padding:0 3px;border-radius:5px;background-color:#BCD4E6;">selectë¬¸</span>ì„ ì‹¤í–‰í•˜ê³  <span style="margin-bottom:15px;padding:0 3px;border-radius:5px;background-color:#BCD4E6;">ê²°ê³¼ì§‘í•©(ResultSet)</span>ì„ ë°˜í™˜<br><br>
- <B>executeUpdate(String sql)</B><br>
  <span style="margin-bottom:15px;padding:0 3px;border-radius:5px;background-color:#BCD4E6;">insert, update, deleteì™€ ê°™ì€ DMLì¿¼ë¦¬</span>ë¥¼ ì‹¤í–‰í•˜ê³ , ì˜í–¥ì„ ë¯¸ì¹œ í–‰ì˜ ìˆ˜ë¥¼ ë°˜í™˜<br><br>
- <B>execute(String sql)</B><br>
  <span style="margin-bottom:15px;padding:0 3px;border-radius:5px;background-color:#BCD4E6;">ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì§€ì›í•˜ì§€ ì•ŠëŠ” íŠ¹ìˆ˜í•œ ì‘ì—…</span>ì„ ìˆ˜í–‰í•˜ëŠ”ë° ì‚¬ìš©<br><br>

ğŸ“˜ ì¿¼ë¦¬ ìˆ˜í–‰ ë°©ì‹<br>
ë°ì´í„°ë² ì´ìŠ¤ ì—”ì§„ì€ ë¨¼ì € <span style='color:rgb(196,58,26);font-weight:bold;'>**</span>parseì™€ ë¬¸ë²•ê²€ì‚¬ë¥¼ ì‹¤í–‰í•œë‹¤.<br>
Statementë¥¼ ìˆ˜í–‰í•˜ê¸° ìœ„í•œ <span style='color:rgb(196,58,26);font-weight:bold'>**</span>ê°€ì¥ íš¨ìœ¨ì ì¸ ë°©ë²•ì„ íƒìƒ‰í•œë‹¤.(ì¿¼ë¦¬ í”Œëœ, ê³„ì‚° ê³¼ì •ì—ì„œ ë¹„ìš©ì´ ë°œìƒ)<br>
ê·¸ í›„ ì‹¤í–‰í•œë‹¤.<br><br>

ğŸ’£ Statementë¥¼ ì‚¬ìš©í•˜ë©´, ë§¤ë²ˆ ì¿¼ë¦¬ë¥¼ ìˆ˜í–‰í•  ë•Œë§ˆë‹¤ ìœ„ì˜ ë°©ì‹ì„ ê±°ì¹œë‹¤.
ì¦‰, <B>ìºì‹œë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠìŒìœ¼ë¡œ ì¿¼ë¦¬ í”Œëœì„ ì¬ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.</B><br>
ë˜í•œ,<br>
ğŸ’£ <span style='color:rgb(196,58,26);font-weight:bold'>SQL Injection</span> ê³µê²©ì—ëŠ” ì·¨ì•½í•˜ë‹¤.

</div>

```java
String eName = "\' \' OR 1=1";
String sqlQuery = "SELECT empNo, eName, job FROM emp WHERE eName = " + eName;
// Statement ìƒì„±
Statement stmt = conn.createStatement();
// SQL ì¿¼ë¦¬ ì‹¤í–‰
ResultSet resultSet = statement.executeQuery(sqlQuery);

// ê²°ê³¼ ì²˜ë¦¬
while(resultSet.next()) {
    int empNo = resultSet.getInt("empNo");
    String eName = resultSet.getString("eName");
    String job = resultSet.getString("job");
    System.out.println(empNo + ". name: " + eName + ", job: " + job);
}
```

<div style="margin-bottom:15px;font-size:15px;background-color:rgba(0,0,0,0.03);border-radius:5px;padding:7px;">
eNameì— ì¶©ë¶„íˆ ì•…ì˜ì ì¸ sqlêµ¬ë¬¸ì´ ë“¤ì–´ê°ˆ ìˆ˜ ìˆê³ , ë•Œë¬¸ì— ì˜ë„í•˜ì§€ ì•Šì€ ë™ì‘ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.<br>
ì´ë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´, í•´ë‹¹ í´ë˜ìŠ¤ëŠ” ë‘ê°€ì§€ í•˜ìœ„ í´ë˜ìŠ¤ë¡œ ë‚˜ë‰œë‹¤.<br>
<B>(1) PreparedStatement</B><br>
sqlë¬¸ì„ <span style="margin-bottom:15px;padding:0 3px;border-radius:5px;background-color:#ffdce0;">ë¯¸ë¦¬ ì»´íŒŒì¼</span>í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ì— <span style="margin-bottom:15px;padding:0 3px;border-radius:5px;background-color:#ffdce0;">ìºì‹œ</span>í•œë‹¤.<br>
ë¯¸ë¦¬ ì»´íŒŒì¼ í•´ë‘ëŠ” ê²ƒê³¼ ìºì‹œëœ ì¿¼ë¦¬í”Œëœì„ ì¬ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— <B>ì‹¤í–‰ ì†ë„ê°€ ë¹ ë¥´ë‹¤.</B><br>
ë˜í•œ <span style='color:#652DC1;font-weight:bold;'>?(placeholder)</span>ë¥¼ ì‚¬ìš©í•˜ì—¬ sqlë¬¸ì„ ì •ì˜í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, <span style="margin-bottom:15px;padding:0 3px;border-radius:5px;background-color:#ffdce0;">ì¸ìë§Œ ë°”ê¿” ë°˜ë³µ ì‹¤í–‰í•  ë•Œ ìœ ìš©í•˜ë©°, ì´ëŠ” ìºì‹œ ì‚¬ìš©ì— ì í•©í•˜ë‹¤.</span><br><br>

<B>PreparedStatement</B>ë°©ì‹ì€ <span style="margin-bottom:15px;padding:0 3px;border-radius:5px;background-color:rgba(193,151,210,0.7);">sqlì¿¼ë¦¬ì˜ í…œí”Œë¦¿ì„ ë¯¸ë¦¬ ì‘ì„±</span>í•˜ê³  ì‹¤í–‰í•˜ê¸° ì „ì— <span style="margin-bottom:15px;padding:0 3px;border-radius:5px;background-color:rgba(193,151,210,0.7);">íŒŒë¼ë¯¸í„°ë¥¼ ì±„ì›Œë„£ëŠ” ë°©ì‹</span>ìœ¼ë¡œ ë™ì‘í•œë‹¤.<br>
ì´ ë•Œ JDBC Driverì— ì˜í•´ <span style='color:rgb(196,58,26);'>ìë™ìœ¼ë¡œ ì´ìŠ¤ì¼€ì´í”„ë˜ì–´ ì²˜ë¦¬</span>ë˜ëŠ”ë°,<br>
ì´ ê³¼ì •ìœ¼ë¡œ ì¸í•´ <span style="margin-bottom:15px;padding:0 3px;border-radius:5px;background-color:#ffdce0;">íŒŒë¼ë¯¸í„°(ì‚¬ìš©ì ì…ë ¥)ê°€ sqlë¬¸ì˜ ì¼ë¶€ë¡œ í•´ì„ë˜ì§€ ì•Šê³ , ê·¸ì € ë¬¸ìì—´ ê°’ ê·¸ëŒ€ë¡œ ì²˜ë¦¬ëœë‹¤.</span>(ì•…ì˜ì ì¸ sqlì½”ë“œë¡œ í•´ì„ì„ ë°©ì§€)<br>
ì¦‰, ë°ì´í„°ë°”ì¸ë”©ì´ <B>íŒŒë¼ë¯¸í„°í™”</B>ë˜ì–´ <B>method</B>ë¥¼ í†µí•´ ì´ë£¨ì–´ì§ìœ¼ë¡œ <span style="margin-bottom:15px;padding:0 3px;border-radius:5px;background-color:#E1FEE5;">ì§€ì •í•œ íƒ€ì…ë§Œì„ ë„£ì„ ìˆ˜ ìˆìœ¼ë©°</span>,<br>
ì§€ì •ëœ íƒ€ì…ì´ ë¬¸ìì—´ì¼ ì‹œ, <span style="margin-bottom:15px;padding:0 3px;border-radius:5px;background-color:#E1FEE5;">ìë™ ì´ìŠ¤ì¼€ì´í”„ë¡œ ì¸í•´ ë¬¸ìì—´ ê·¸ ìì²´ë¡œë§Œ í•´ì„í•´, SQL Injection ê³µê²©ì„ ì˜ˆë°©í•  ìˆ˜ ìˆë‹¤.</span>

</div>

```java
String sqlQuery = "SELECT empNo, eName, job FROM emp WHERE empName = ?";
// PreparedStatement ìƒì„±
PreparedStatement pstmt = conn.preparedStatement(sqlQuery);

// íŒŒë¼ë¯¸í„° ì„¤ì •
String empName = "woo";
preparedStatement.setString(1, empName);

// SQL ì¿¼ë¦¬ ì‹¤í–‰
ResultSet resultSet = statement.executeQuery();

// ê²°ê³¼ ì²˜ë¦¬
while(resultSet.next()) {
    int empNo = resultSet.getInt("empNo");
    String eName = resultSet.getString("eName");
    String job = resultSet.getString("job");
    System.out.println(empNo + ". name: " + eName + ", job: " + job);
}
```

<div style="margin-bottom:15px;font-size:15px;background-color:rgba(0,0,0,0.03);border-radius:5px;padding:7px;">
<B>(2) CallableStatement</B><br>
ì €ì¥ í”„ë¡œì‹œì €ë¥¼ ì‹¤í–‰í•˜ëŠ”ë° ì‚¬ìš©ëœë‹¤.<br>
ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë¯¸ë¦¬ ì •ì˜ëœ ì¼ë ¨ì˜ sqlëª…ë ¹ë¬¸ì„ ì‹¤í–‰í•˜ëŠ”ë° ì‚¬ìš©ëœë‹¤.
</div>

## JDBC (Java Database Connectivity)

<div style="margin-bottom: 15px;font-size:20px;background-color:#FFD24D;color:black;font-weight:normal;border-top-left-radius:5px;border-top-right-radius:5px;padding:2px;">
    ğŸ€ JDBC ë¡œë“œ, ì—°ê²°, ì‹¤í–‰, ë‹«ê¸°
</div>

- ğŸš€ (1) ë¡œë“œ
  : ì—°ë™í•˜ë ¤ëŠ” DBì œí’ˆ(ë²¤ë”)ë¥¼ ì„ íƒí•˜ëŠ” ê²ƒ, Driverê°€ í•„ìš”í•˜ë‹¤.(~.jar)
  : `Class.forName("oracle:oracle.jdbc.driver.OracleDriver");`  
  : <span style="margin-bottom:15px;padding:0 3px;font-size:16px;border-radius:5px;background-color:rgba(0,0,0,0.03);">âš ï¸ ë§Œì•½ Driverë¥¼ ëª»ì°¾ìœ¼ë©´ ClassNotFoundException ë°œìƒ</span>
- ğŸš€ (2) ì—°ê²°
  : ë¡œë“œëœ DBì— ì ‘ì†, <span style="margin-bottom:15px;padding:0 3px;border-radius:5px;background-color:#BCD4E6;">URL(host name, port, SID)</span>, <span style="margin-bottom:15px;padding:0 3px;border-radius:5px;background-color:#BCD4E6;">ID</span>, <span style="margin-bottom:15px;padding:0 3px;border-radius:5px;background-color:#BCD4E6;">Password</span>ë¥¼ ì´ìš©í•´ì„œ <span style='color:rgb(196,58,26);'>ì—°ê²°ê°ì²´(Connection)</span>ë¥¼ ì–»ì–´ì˜¤ëŠ” ê³¼ì •  
  : <span style="margin-bottom:15px;padding:0 3px;font-size:16px;border-radius:5px;background-color:rgba(0,0,0,0.03);">âš ï¸ ConnectionException ë°œìƒ</span>
- ğŸš€ (3) ì‹¤í–‰
  : CRUD ì‘ì—… (Statement or PreparedStatement)
- ğŸš€ (4) ë‹«ê¸°
  : ì‚¬ìš©ëœ ê°ì²´ë¥¼ ë°˜ë‚©
  : `close();`

<span style="margin-bottom:15px;padding:0 3px;font-size:16px;border-radius:5px;background-color:rgba(0,0,0,0.03);">âš ï¸ ì—°ê²°ê°ì²´(Connection)ëŠ” ì ˆëŒ€ë¡œ ê³µìœ í•˜ë©´ ì•ˆëœë‹¤.(1ì»¤ë„¥ì…˜ == 1íŠ¸ëœì­ì…˜)</span>

`ğŸ“œ DBManager.java`

```java
public class DBManager {
    // ë¡œë“œ
    static {
        try {
            Class.forName(DBProperties.DRIVER_NAME);
        } catch(ClassNotFoundException e) {
            e.printStackTrace();
        }
    }

    // ì—°ê²°
    public static Connection getConnection() throws SQLException {
        return DriverManager.getConnection(DBProperties.URL, DBProperties.USER_ID, DBProperties.USER_PASS);
    }

    // ë‹«ê¸° (DML ì „ìš©)
    public static void releaseConnection(Connection conn, PreparedStatement pstmt) {
        try {
            if(st != null) pstmt.close();
            if(conn != null) conn.close();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    // ë‹«ê¸° (SELECT ì „ìš©)
    public static void releaseConnection(Connection conn, PreparedStatement pstmt, ResultSet rs) {
        try {
            if(rs != null) rs.close();
        } catch (SQLException e) {
            e.printStackTrace();
        }
        releaseConnection(conn, pstmt);
    }
}
```

`ğŸ“œ DBProperties.java`

```java
public interface DBProperties {
    public static final String DRIVER_NAME = "oracle.jdbc.driver.OracleDriver";
    String URL = "jdbc:oracle:thin:@localhost:1521:XE";
    String USER_ID = "c##scott";
    String USER_PASS = "tiger";
}
```

`ğŸ“œ JDBCDQLExample.java`

```java
public class JDBCDQLExample {
    public static void main(String[] args) {
        Connection conn = null;
        PreparedStatement pstmt = null;
        ResultSet rs = null;

        try {
            conn = DBManager.getConnection();

            String sqlQuery = "SELECT empNo, eName, job FROM emp WHERE eName = ?";
            PreparedStatement pstmt = conn.preparedStatement(sqlQuery);

            String eName = "woo";
            preparedStatement.setString(1, eName);

            ResultSet resultSet = statement.executeQuery();
            while(resultSet.next()) {
                int empNo = resultSet.getInt("empNo");
                String eName = resultSet.getString("eName");
                String job = resultSet.getString("job");
                System.out.println(empNo + ". name: " + eName + ", job: " + job);
            }
        } catch (CloassNotFoundException e) {
            e.printStackTrace();
        } catch (SQLException e) {
            e.printStackTrace();
        } finally {
            try {
                releasConnection(conn, pstmt, rs);
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }
    }
}
```

## Mapperë¬¸ì„œ

<div style="margin-bottom:15px;font-size:20px;background-color:rgb(35,43,47);color:white;font-weight:normal;border-top-left-radius:5px;border-top-right-radius:5px;padding:2px;">
    ğŸ <span style='color:#8b00ff;'>ì¿¼ë¦¬</span>ë¥¼ ì‘ì„±í•´ë†“ì€ ë¬¸ì„œ
</div>

`ğŸª› empmapper.xml`

```xml
<mapper namespace="emp">
    <select id="select" parameterType="String" resultType="emp">
        SELECT * FROM emp WHERE eName=#{eName}
    </select>

    <select id="selectAll" resultType="emp">
        SELECT * FROM emp
    </select>

    <insert id="insert" parameterType="emp">
        INSERT INTO emp VALUES(#{empNo}, #{eName}, #{job})
    </insert>

    <update id="update" parameterType="emp">
        UPDATE TABLE emp SET job = #{job} WHERE empNo = #{empNo}
    </update>

    <delete id="delete" parameterType="int">
        DELETE FROM emp WHERE empNo = #{empNo}
    </delete>
</mapper>
```

ğŸ§€ `#{ }`: PreparedStatement ë°©ì‹, ë”°ì˜´í‘œë¡œ ë¬¶ì–´ì„œ ë§¤í•‘  
ğŸ§€ `${ }`: Statementë°©ì‹, ê·¸ëŒ€ë¡œ ë§¤í•‘

<span style="margin-bottom:15px;padding:0 3px;font-size:16px;border-radius:5px;background-color:rgba(0,0,0,0.03);">âš ï¸ íŒŒë¼ë¯¸í„°ê°€ í•˜ë‚˜ë§Œ ë“¤ì–´ì˜¬ ë•Œ, ê´€ë¡€ì ìœ¼ë¡œ ${\_parameter}ë¥¼ ì“´ë‹¤.</span>

## sql íƒœê·¸

<div style="margin-bottom:15px;font-size:20px;background-color:rgb(196,58,26);color:white;border-top-left-radius:5px;border-top-right-radius:5px;padding:2px;">
    ğŸª ì¬ì‚¬ìš© ê°€ëŠ¥í•œ sql êµ¬ë¬¸ ì •ì˜í•œ íƒœê·¸ë¥¼ ë§í•œë‹¤
</div>

```xml
<sql id="empColumns">empNo, eName, job</sql>
<sql id="select" parameterType="int" resultType="hashmap">
    select <include refid="empColumns" />
    from emp
    where empNo = #{empNo}
</sql>
```

## MyBatis ì£¼ìš” ì»´í¬ë„ŒíŠ¸

<div style="margin-bottom:15px;font-size:20px;background-color:#652DC1;color:white;border-top-left-radius:5px;border-top-right-radius:5px;padding:2px;">
    ğŸ™ MyBatis ì£¼ìš” ì»´í¬ë„ŒíŠ¸
</div>

- `SqlSessionFactoryBuilder` <span style="margin-bottom:15px;padding:0 3px;border-radius:5px;background-color:#BCD4E6;">method scope</span>  
  : SqlSessionFactoryë¥¼ ì„¸ìš°ëŠ” ì—­í• 
- `SqlSessionFactory` <span style="margin-bottom:15px;padding:0 3px;border-radius:5px;background-color:#BCD4E6;">application scope</span>  
  : í•„ìš”í•  ë•Œë§ˆë‹¤ SqlSessionì„ ìƒì„±í•´ì£¼ëŠ” ì—­í• , `static singleton pattern`
- `SqlSession` <span style="margin-bottom:15px;padding:0 3px;border-radius:5px;background-color:#BCD4E6;">method scope</span>  
  : JDBC connectionê³¼ ë™ì¼ (Not to be shared, closing)

<span style="margin-bottom:15px;padding:0 3px;font-size:16px;border-radius:5px;background-color:rgba(0,0,0,0.03);">ğŸ§€ MyBatisëŠ” auto commitì´ ì•„ë‹ˆë‹¤.</span>

`ğŸ“œ DBManager.java`

```java
public class DBManager {
    private static SqlSessionFactory factory;

    static {
        try {
            String resource = "mybatis.xml";
            // ë¦¬ì†ŒìŠ¤ íŒŒì¼ì„ ë¡œë“œí•˜ì—¬ Readerê°ì²´ë¡œ ë³€í™˜
            Reader reader = Resources.getResourceAsReader(resource);

            factory = new SqlSessionFactoryBuilder().build(reader);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static SqlSession getSession() {
        return factory.openSession();
    }

    public static void sessionClose(SqlSession session) {
        if(session != null) session.close();
    }

    // íŠ¸ëœì­ì…˜ ì²˜ë¦¬
    // stateê°€ trueì¸ ê²½ìš° commit(), falseì¸ ê²½ìš° rollback()
    public static void sessionClose(SqlSession session, boolean state) {
        if(session != null) {
            if(state) session.commit();
            else session.rollback();

            session.close();
        }
    }
}
```

`ğŸª› mybatis.xml`

```xml
<configuration>
    <!-- dbì •ë³´ë¥¼ ë‹´ê³  ìˆëŠ” ì™¸ë¶€ properties íŒŒì¼ ìœ„ì¹˜ ì§€ì • -->
    <properties resource="dbInfo.properties" />

    <!-- ê°’ì´ ì „ë‹¬ë˜ì§€ ì•Šìœ¼ë©´ NULLë¡œ ë“¤ì–´ê°ˆ ìˆ˜ ìˆë„ë¡ ì„¤ì • -->
    <settings>
        <setting name="jdbcTypeForNull" value="NULL" />
    </settings>

    <!-- ê°ì²´ì— ë³„ì¹­ ë§Œë“¤ê¸° -->
    <typeAliases>
        <typeAlias type="app.dto.Emp" alias="emp" /> <!-- í´ë˜ìŠ¤ ê²½ë¡œë¥¼ empë¡œ ê°„ë‹¨í•˜ê²Œ ì‚¬ìš© -->
    </typeAliases>

    <!-- DBCP -->
    <environments default="development">
        <environment id="development">
            <transactionManager type="JDBC" />
            <dataSource type="POOLED">
                <property name="driver" value="${driver}" />
                <property name="url" value="${url}" />
                <property name="username" value="${username}" />
                <property name="password" value="${password}" />
            </dataSource>
        </environment>
    </environments>

    <!-- ì¿¼ë¦¬ ì‘ì„± ë¬¸ì„œ(mapperë¬¸ì„œ) ìœ„ì¹˜ ì§€ì •(ë“±ë¡) -->
    <mappers>
        <mapper resource="empmapper.xml" />
    </mappers>
</configuration>
```

`ğŸ“œ XxxDAO.java`

```java
public class XxxDAO {
    public void selectByXxxName() {
        SqlSession session = null;

        try {
            session = DBManager.getSession();
            List<String> list = session.selectList("emp.select") // namespace.id
            System.out.println("list: " + list);
        } finally {
            DBManager.sessionClose(session);
        }
    }
}
```

ğŸ§€ <span style="margin-bottom:15px;padding:0 3px;border-radius:5px;background-color:#ffdce0;">mybatis ë‚´ë¶€ì—ì„œ executeQuery()ê°€ ì‹¤í–‰ëœë‹¤.</span>

## mybatis-spring

<div style="margin-bottom:15px;font-size:20px;background-color:rgb(196,58,26);color:white;border-top-left-radius:5px;border-top-right-radius:5px;padding:2px;">
    ğŸª Springì—ì„œ ORMì„ ë” ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ë§Œë“¤ì–´ì„œ ì œê³µí•œë‹¤.
</div>

ğŸš€ mybatis-spring ì£¼ìš” ì»´í¬ë„ŒíŠ¸ ğŸš€

- `SqlSessionFactoryBean`  
  : (mybatis) SqlSessionFactoryë¥¼ SqlSessionTemplateì˜ ìƒì„±ìì— ì „ë‹¬í•œë‹¤.
- `SqlSessionTemplate`  
  : (mybatis) SqlSessionì„ ë¯¸ë¦¬ ë§Œë“¤ì–´ ë†“ëŠ”ë‹¤.

`ğŸª› mybatis-context.xml`

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:p="http://www.springframework.org/schema/p"
xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsdhttp://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsdhttp://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsdhttp://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.3.xsd">

    <context:component-scan base-package="web.mvc.service,web.mvc.repository"/>

    <beans:bean id="dataSource"
                        class="org.apache.commons.dbcp.BasicDataSource"
                        p:driverClassName="${jdbc.oracle.driver}"
                        p:url="${jdbc.oracle.url}"
                        p:username="${jdbc.oracle.username}"
                        p:password="${jdbc.oracle.password}"
                        p:maxActive="10" />

    <beans:bean id="sqlSessionFactory"
                        class="org.mybatis.spring.SqlSessionFactoryBean">
        <beans:property name="dataSource" ref="dataSource" />
        <beans:property name="mapperLocation" value="classpath:mapper/*Mapper.xml" />
        <beans:property name="typeAliasesPackage" value="web.mvc.dto" /><!-- dto í´ë” ì•ˆì— ìˆëŠ” í´ë˜ìŠ¤ë“¤ ë³„ì¹­ ìë™ ë§Œë“¦, í´ë˜ìŠ¤ì˜ ì²«ê¸€ìë§Œ ì†Œë¬¸ì -->
    </beans:bean>

    <beans:bean id="sqlSession"
                        class="org.mybatis.spring.SqlSessionTemplate">
        <beans:constructor-arg index="0" ref="sqlSessionFactory" />
    </beans:bean>
</beans:beans>
```
